// prettier-ignore
const A_SHAPE = [
  ['x', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x']
];

// prettier-ignore
const B_SHAPE = [
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', ' ']
];

// prettier-ignore
const C_SHAPE = [
  [' ', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' '],
  [' ', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const D_SHAPE = [
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', ' ']
];

// prettier-ignore
const E_SHAPE = [
  ['x', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', ' '],
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const F_SHAPE = [
  ['x', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', ' '],
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' ']
];

// prettier-ignore
const G_SHAPE = [
  [' ', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', 'x', 'x'],
  [' ', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const H_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x']
];

// prettier-ignore
const I_SHAPE = [
  ['x', 'x', 'x', 'x', 'x'],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' '],
  ['x', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const J_SHAPE = [
  [' ', ' ', ' ', 'x', 'x'],
  [' ', ' ', ' ', 'x', ' '],
  [' ', ' ', ' ', 'x', ' '],
  ['x', ' ', ' ', 'x', ' '],
  [' ', 'x', 'x', ' ', ' ']
];

// prettier-ignore
const K_SHAPE = [
  ['x', ' ', ' ', 'x', ' '],
  ['x', ' ', 'x', ' ', ' '],
  ['x', 'x', ' ', ' ', ' '],
  ['x', ' ', 'x', ' ', ' '],
  ['x', ' ', ' ', 'x', ' ']
];

// prettier-ignore
const L_SHAPE = [
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const M_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', ' ', 'x', 'x'],
  ['x', ' ', 'x', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x']
];

// prettier-ignore
const N_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', ' ', ' ', 'x'],
  ['x', ' ', 'x', ' ', 'x'],
  ['x', ' ', ' ', 'x', 'x'],
  ['x', ' ', ' ', ' ', 'x']
];

// prettier-ignore
const O_SHAPE = [
  [' ', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  [' ', 'x', 'x', 'x', ' ']
];

// prettier-ignore
const P_SHAPE = [
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', ' '],
  ['x', ' ', ' ', ' ', ' ']
];

// prettier-ignore
const Q_SHAPE = [
  [' ', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', 'x', ' ', 'x'],
  [' ', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const R_SHAPE = [
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', ' '],
  ['x', ' ', 'x', ' ', ' '],
  ['x', ' ', ' ', 'x', ' ']
];

// prettier-ignore
const S_SHAPE = [
  [' ', 'x', 'x', 'x', 'x'],
  ['x', ' ', ' ', ' ', ' '],
  [' ', 'x', 'x', 'x', ' '],
  [' ', ' ', ' ', ' ', 'x'],
  ['x', 'x', 'x', 'x', ' ']
];

// prettier-ignore
const T_SHAPE = [
  ['x', 'x', 'x', 'x', 'x'],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' ']
];

// prettier-ignore
const U_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  [' ', 'x', 'x', 'x', ' ']
];

// prettier-ignore
const V_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  [' ', 'x', ' ', 'x', ' '],
  [' ', 'x', ' ', 'x', ' '],
  [' ', ' ', 'x', ' ', ' ']
];

// prettier-ignore
const W_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', ' ', ' ', 'x'],
  ['x', ' ', 'x', ' ', 'x'],
  ['x', 'x', ' ', 'x', 'x'],
  ['x', ' ', ' ', ' ', 'x']
];

// prettier-ignore
const X_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  [' ', 'x', ' ', 'x', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', 'x', ' ', 'x', ' '],
  ['x', ' ', ' ', ' ', 'x']
];

// prettier-ignore
const Y_SHAPE = [
  ['x', ' ', ' ', ' ', 'x'],
  [' ', 'x', ' ', 'x', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', ' ', 'x', ' ', ' ']
];

// prettier-ignore
const Z_SHAPE = [
  ['x', 'x', 'x', 'x', 'x'],
  [' ', ' ', ' ', 'x', ' '],
  [' ', ' ', 'x', ' ', ' '],
  [' ', 'x', ' ', ' ', ' '],
  ['x', 'x', 'x', 'x', 'x']
];

// prettier-ignore
const SPACE_SHAPE = [
  [' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' '],
  [' ', ' ', ' ', ' ', ' '],
]

const LETTER_TO_SHAPE_MAP: Record<string, string[][]> = {
    a: A_SHAPE,
    b: B_SHAPE,
    c: C_SHAPE,
    d: D_SHAPE,
    e: E_SHAPE,
    f: F_SHAPE,
    g: G_SHAPE,
    h: H_SHAPE,
    i: I_SHAPE,
    j: J_SHAPE,
    k: K_SHAPE,
    l: L_SHAPE,
    m: M_SHAPE,
    n: N_SHAPE,
    o: O_SHAPE,
    p: P_SHAPE,
    q: Q_SHAPE,
    r: R_SHAPE,
    s: S_SHAPE,
    t: T_SHAPE,
    u: U_SHAPE,
    v: V_SHAPE,
    w: W_SHAPE,
    x: X_SHAPE,
    y: Y_SHAPE,
    z: Z_SHAPE,
    ' ': SPACE_SHAPE,
}

export type CreateTextShapeProps = {
    underline?: boolean
}

export const createTextShape = (text: string, { underline }: CreateTextShapeProps = {}) => {
    const shape: string[][] = []

    const lowercaseText = text.toLowerCase()

    for (let letterIndex = 0; letterIndex < lowercaseText.length; letterIndex++) {
        const letter = lowercaseText[letterIndex]

        const letterShape = LETTER_TO_SHAPE_MAP[letter]

        if (!letterShape) {
            continue
        }

        for (let rowIndex = 0; rowIndex < letterShape.length; rowIndex++) {
            const row = letterShape[rowIndex]

            if (!shape[rowIndex]) {
                shape[rowIndex] = []
            }

            shape[rowIndex].push(...row)

            if (letter !== ' ' && letterIndex < lowercaseText.length - 1) {
                shape[rowIndex].push(' ')
            }
        }
    }

    if (underline) {
        const underlineRow = Array(Math.max(...shape.map((col) => col.length))).fill('x')

        shape.push([], underlineRow)
    }

    return shape
}
